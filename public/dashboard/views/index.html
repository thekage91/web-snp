<script type="text/javascript">
  function fill (){
    $.get('/api/user/' + document.getElementById('iddi').innerHTML)
      .success(function(data){

        data.payload.roles.forEach(function(entry) {
            if (data.payload.roles.indexOf("Admin") > -1) {
                var e = document.getElementById('home');
                e.visibility = "visible";

                e = document.getElementById('profile');
                e.visibility = "visible";

                e = document.getElementById('query');
                e.visibility = "visible";

                e = document.getElementById('upload');
                e.visibility = "visible";

                e = document.getElementById('authorize');
                e.visibility = "visible";

                e = document.getElementById('families');
                e.visibility = "visible";

                e = document.getElementById('button');
                e.visibility = "hidden";

            } else if (data.payload.roles.indexOf("Licensed") > -1){
                var e = document.getElementById('home');
                e.visibility = "visible";

                e = document.getElementById('profile');
                e.visibility = "visible";

                e = document.getElementById('query');
                e.visibility = "visible";

                e = document.getElementById('button');
                e.visibility = "hidden";

            } else {
                var e = document.getElementById('home');
                e.visibility = "visible";

                e = document.getElementById('profile');
                e.visibility = "visible";

                e = document.getElementById('button');
                e.visibility = "hidden";

            }
            ;        
        });
        

      });
  };
</script>

<div id="wrapper">
 <script src="/angoose/angoose-client.js"></script>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" data-ng-controller="HeaderController">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand">Web SNP</a>
        </div>
        <!-- /.navbar-header -->

        <ul class="nav navbar-top-links navbar-right">

            <!-- Elementi che prima stavano nella barra grigia in alto -->
            <li><a ui-sref='dashboard.home' data-ng-show="global.authenticated">Dashboard</a>
            <li data-ng-hide="global.authenticated"><a ui-sref='auth.login'><i class="fa fa-sign-in fa-fw"></i> Login</a>
            <li class="divider-vertical"></li>
            <!--<li><a ui-sref='auth.register' data-ng-hide="global.authenticated">Register</a>
            <li class="divider-vertical"></li>-->
            <li><a ui-sref='info'>Info</a>
            <li class="divider-vertical"></li>
            <li><a ui-sref='aboutUs'>About us</a>
            <li class="divider-vertical"></li>
            <!-- -->

            <!-- /.dropdown -->
            <li class="dropdown" data-ng-show="global.authenticated">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user" >
                    <li><a ui-sref="dashboard.userProfile"><i class="fa fa-user fa-fw"></i>My Profile</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="/logout"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                    </li>
                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
        <!-- /.navbar-top-links -->

        <!-- Left Sidebar -->
        <h1 hidden id="iddi">{{global.user._id}}</h1>

        <div class="navbar-default navbar-static-side " role="navigation" ng-controller="SidebarCtrl" data-ng-show="global.authenticated">
            <div class="sidebar-collapse">
                <ul class="nav" id="side-menu">   
                    <li>
                        <a hidden id="home" ui-sref="dashboard.home"><i class="fa fa-home fa-fw"></i>Home</a>
                    </li>
                    
                    <li>
                        <a hidden id="profile"ui-sref="dashboard.userProfile"><i class="fa fa-user fa-fw"></i>My Profile</a>
                    </li>

                    <li>
                        <a hidden id="query" ui-sref="dashboard.executeQuery"><i class="fa fa-search fa-fw"></i>Execute Query</a>
                        <!--<a ui-sref="dashboard.executeQuery" ng-show="global.isLicensed"><i class="fa fa-search fa-fw"></i>Execute Query</a>-->

                    </li>

                    <!-- queste tre cose puo' farle solo l'admin -->
                    <li>
                        <a hidden id="upload" ui-sref="dashboard.uploadSequencing"><i class="fa fa-upload fa-fw"></i>Sequencing Upload</a>
                        <!--<a ui-sref="dashboard.uploadSequencing" ng-show="user.isAdmin"><i class="fa fa-upload fa-fw"></i>Sequencing Upload</a>-->

                    </li>

                    <li>
                        <a hidden id="authorize" ui-sref="dashboard.authorizeUser"><i class="fa fa-edit fa-fw"></i>Authorize Users</a>
                        <!--<a ui-sref="dashboard.authorizeUser" ng-show="user.isAdmin()"><i class="fa fa-edit fa-fw"></i>Authorize Users</a>-->
                    </li>

                    <li>
                        <a hidden id="families" ui-sref="dashboard.families"><i class="fa fa-users fa-fw"></i>Families</a>
                        <!--<a ui-sref="dashboard.families" ng-show="user.isAdmin()"><i class="fa fa-users fa-fw"></i>Families</a>-->

                    </li>
                    <!-- -->

                    <!-- RIMUOVERE!!! CI SI ARRIVERA' DALLE QUERY AL SEQUENZIAMENTO
                    <li>
                        <a ui-sref="dashboard.sequencingDetails"><i class="fa fa-search fa-fw"></i>Sequencing Details (rimuovere)</a>
                    </li>

                    <li>
                        <a ui-sref="dashboard.sequencingEdit"><i class="fa fa-search fa-fw"></i>Sequencing Edit (rimuovere)</a>
                    </li>
                    -->

                </ul>
                <!-- /#side-menu -->
            </div>
            <!-- /.sidebar-collapse -->
        </div>
        <!-- /.navbar-static-side -->
    </nav>

    <div id="page-wrapper" data-ng-controller="HeaderController" ng-show="global.authenticated">
        <div ui-view>
        </div>       
    </div>
    <!-- /#page-wrapper -->
</div>