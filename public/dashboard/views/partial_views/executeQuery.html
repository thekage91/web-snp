<div>

<h1 hidden id="iddi">{{global.user._id}}</h1>

<div class="row">
  <h1 class="section-header">Execute Query</h1>  
  <hr>
</div>

<script type="text/javascript">
   function changeLabel(value) {
       var e = document.getElementById('search_concept');
       e.innerHTML = value;
   }

</script>

<ul class="nav nav-tabs" ng-controller="ExecuteQueryCtrl">
      <li class="text-left"><a href="#basic" data-toggle="tab" ng-click="clear()">Basic SNPs Search</a></li>
      <li class="text-left"><a href="#complex" data-toggle="tab" ng-click="clear()">Range SNPs Search</a></li>

    </ul>

    <!-- First tab -->
    <div id="myTabContent" class="tab-content" ng-controller="ExecuteQueryCtrl">
      <div class="tab-pane active in" id="basic">
        <div class="row bot15">
                <div id="custom-search-input">
                <h4>Choose what to search and then insert keywords:</h4>
                <div class="input-group col-md-6">
                  <div class="input-group">
                    <div class="input-group-btn search-panel">
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        <span id="search_concept">Search by...</span> <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu" role="menu">
                        <li><a href="#patient" ng-click="elValue('patient')" onClick="changeLabel('Patient')">Patient</a></li>
                        <li><a href="#gene" ng-click="elValue('gene')" onClick="changeLabel('Gene')">Gene</a></li>
                        <li><a href="#genotype"  ng-click="elValue('genotype')" onClick="changeLabel('Genotype')">Genotype</a></li>
                       <li><a href="#freqAlt"  ng-click="elValue('freqAlt')" onClick="changeLabel('Freq alt')">Freq alt</a></li>
                        <li><a href="#dbsnp"  ng-click="elValue('dbSNP')" onClick="changeLabel('dbSNP')">dbSNP</a></li>
                      </ul>
                    </div>
                    <input type="hidden" name="search_param" value="all" id="search_param" />         
                    <input id = "key" ng-model="query.keyword" type="search" class="search-query form-control" placeholder="Type Here" />                   
                    <span class="input-group-btn">
                      <button class="btn btn-danger" type="button" ng-click="submitBase()">
                        <span class="glyphicon glyphicon-search"></span>
                      </button>
                    </span>
                  </div>
                </div>
              </div>
            </div>


            <div class="row input-group-btn search-panel">
              <div id="firstCombobox" class="col-md-4">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  <input id="refine_value_first" ng-model="chooseFilterMutation" disabled 
                          style="border: 0px"></input> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li><a ng-click="valueRefineMutation('nonsynonymous SNV')">nonsynonymous SNV</a></li>
                  <li><a ng-click="valueRefineMutation('synonymous SNV')">synonymous SNV</a></li>
                  <li><a ng-click="valueRefineMutation('All Mutation')">All Mutation</a></li>
                </ul>
              </div>

              <div id="secondCombobox" class="col-md-4">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  <input id="refine_value_first" ng-model="chooseFilterRegion" disabled 
                          style="border: 0px"></input> <span class="caret"></span>                </button>
                <ul class="dropdown-menu" role="menu">
                  <li><a ng-click="valueRefineRegion('UTR5')" >UTR5</a></li>
                  <li><a ng-click="valueRefineRegion('UTR3')" >UTR3</a></li>
                  <li><a ng-click="valueRefineRegion('exonic')" >exonic</a></li>
                  <li><a ng-click="valueRefineRegion('intronic')" >intronic</a></li>
                   <li><a ng-click="valueRefine('All Region')" >All Region</a></li>
                </ul>              
              </div>
            </div>


        <!--  style="height: 500px; overflow-y: auto; margin-top: 50px" -->
        <div class="row">
            <h4>Results:</h4>
        <h4 ng-hide="elements.length"> No Results! </h4>
          <div ng-show="elements && elements.length">
            <table class="table table-striped table-fixed-header">
              <thead>
                <tr>
                  <th>Chr</th>
                  <th>Start</th>
                  <th>End</th>
                  <th>Ref</th>
                  <th>Alt</th>
                  <th>Genes</th>
                  <th>Region</th>
                  <th>Mutation</th>

                  <!--<th style="width: 75px;"></th>-->
                </tr>
              </thead>
              <tbody>
                  <tr ng-repeat="el in elements | filter:chooseFilterMutation | filter:chooseFilterRegion"> 
                  <td>{{el.chr}}</td>
                  <td>{{el.start}}</td>
                  <td>{{el.end}}</td>
                  <td>{{el.ref}}</td>
                  <td>{{el.alt}}</td>
                  <td>{{el.genes}}</td>
                  <td>{{el.region}}</td>
                  <td>{{el.mutation}}</td>


                  <!--<td>
                    <button type="button" class="btn btn-primary btn-sm" data-ng-hide="user.isLicensed"
                    data-toggle="modal" data-target="#myModalLicensed">
                    <span class="glyphicon glyphicon-eye-open"></span> View
                    </button> 
                  <br/> 
                  </td>-->
                  </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- First tab end -->



      <!-- Second tab -->
      <div class="tab-pane fade" id="complex">
      <div class="tab-pane active in" id="basic">

        <div>
            <div class="tab-pane" id="region">
            <div class="row bot15">
                      <div id="custom-search-input">
                      <h4>Insert required fields:</h4>
                      <div class="input-group col-md-12">
                        <div class="input-group">
                          <div class="input-group-btn search-panel">
                            <input type="text" ng-model="chr" class="form-control" name="x" placeholder="chr">
                          </div>
                          <div class="input-group-btn search-panel">
                            <input type="text" ng-model="start" class="form-control" name="x" placeholder="start">
                          </div>
                          <div class="input-group-btn search-panel">
                            <input type="text" ng-model="end" class="form-control" name="x" placeholder="end">
                          </div>
                        <span class="input-group-btn">
                            <button class="btn btn-danger" type="button" ng-click="submitByRegion()">
                              <span class="glyphicon glyphicon-search"></span>
                            </button>
                          </span>                    
                        </div>
                        </div>
                      </div>
                    </div>

                <div class="row input-group-btn search-panel">
                    <div id="firstCombobox" class="col-md-4">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span id="refine_value_first">Choose Mutation...</span> <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a ng-click="valueRefine('nonsynonymous SNV')" onClick="changeLabel3('nonsynonymous SNV');">nonsynonymous SNV</a></li>
                            <li><a ng-click="valueRefine('synonymous SNV')" onClick="changeLabel3('synonymous SNV');">synonymous SNV</a></li>
                            <li><a ng-click="valueRefine('all')" onClick="changeLabel3('All');">all</a></li>
                        </ul>
                    </div>

                    <div id="secondCombobox" class="col-md-4">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span id="refine_value_second">Choose Region...</span> <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a ng-click="valueRefine('UTR5')" onClick="changeLabel4('UTR5');">UTR5</a></li>
                            <li><a ng-click="valueRefine('UTR3')" onClick="changeLabel4('UTR3');">UTR3</a></li>
                            <li><a ng-click="valueRefine('exonic')" onClick="changeLabel4('exonic');">exonic</a></li>
                            <li><a ng-click="valueRefine('intronic')" onClick="changeLabel4('intronic');">intronic</a></li>
                            <li><a ng-click="valueRefine('all')" onClick="changeLabel4('all');">all</a></li>
                        </ul>
                    </div>
                </div>
                   <div class="row">
            <h4>Results:</h4>
        <h4 ng-hide="elements.length"> No Results! </h4>
          <div ng-show="elements && elements.length">
            <table class="table table-striped  ">
              <thead>
                <tr>
                    <th>Chr</th>
                    <th>Start</th>
                    <th>End</th>
                    <th>Ref</th>
                    <th>Alt</th>
                    <th>Genes</th>
                    <th>Region</th>
                    <th>Mutation</th>
                  <!--<th style="width: 75px;"></th>-->
                </tr>
              </thead>
              <tbody>
                  <tr ng-repeat="el in elements | filter:chooseFilterMutation | filter:chooseFilterRegion">
                      <td>{{el.chr}}</td>
                      <td>{{el.start}}</td>
                      <td>{{el.end}}</td>
                      <td>{{el.ref}}</td>
                      <td>{{el.alt}}</td>
                      <td>{{el.genes}}</td>
                      <td>{{el.region}}</td>
                      <td>{{el.mutation}}</td>
                  <!--<td>
                      <button type="button" class="btn btn-primary btn-sm" data-ng-hide="user.isLicensed"
                      data-toggle="modal" data-target="#myModalLicensed">
                      <span class="glyphicon glyphicon-eye-open"></span> View
                      </button> 
                  <br/> 
              </td>-->
            </tr>
          </tbody>
        </table>
        </div>
        </div>
            </div>

        </div>
      </div>
      </div>
      </div>
      <!-- Second tab end -->

  </div>
</div>
