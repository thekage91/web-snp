<div ng-controller="AuthorizerUserCtrl" ng-show="global.user.roles.indexOf('admin') > -1">

<div class="row">
  <h1 class="section-header">Authorize Users</h1>  

  <hr>
</div>

<div class="row">

  <div id="custom-search-input" class="col-md-10 bot15">
    <div class="input-group col-md-4 pull-left">
      <input type="search" class="search-query form-control" placeholder="Type here" ng-model="searchUser" />
      <span class="input-group-btn">
        <button class="btn btn-danger" type="button">
          <span class="glyphicon glyphicon-search"></span>
        </button>
      </span>
    </div>
  </div>

  <div class="col-md-2">
    <button type="button" class="btn btn-success btn-sm" data-toggle="collapse" data-parent="#operation" href="#formInsert">
      <span class="glyphicon glyphicon-plus"></span> Add new User
    </button>
  </div>
</div>


<!-- appearance panel -->
<div id="formInsert" class="top10 bot10 panel-collapse collapse out row col-md-6 col-md-offset-3 text-center panel panel-primary appearance">

  <h4>Create user</h4>

  <div class="panel-body">
    <form class="form-horizontal">
      <fieldset>

        <div class="control-group">
          <label class="control-label" for="username">Username</label>
          <div class="controls">
            <input id="username" name="username" type="text" placeholder="Username" class="form-control input-large" required=""
              ng-model="user.username">
            
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="name">First Name</label>
          <div class="controls">
            <input id="name" name="name" type="text" placeholder="First Name" class="form-control input-large" required=""
                    ng-model="user.firstName">
            
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="secondname">Last Name</label>
          <div class="controls">
            <input id="secondname" name="secondname" type="text" placeholder="Last Name" class="form-control input-large" required=""
                    ng-model="user.lastName">
            
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="email">Email</label>
          <div class="controls">
            <input id="email" name="email" type="text" placeholder="Email" class="form-control input-large" required=""
                    ng-model="user.email">
            
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="passwordUser">Password</label>
          <div class="controls">
            <input id="passwordUser" name="passwordUser" type="password" placeholder="Password" class="form-control input-large" required="" ng-model="user.password">
            
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="confirmpasswordUser">Confirm Password</label>
          <div class="controls">
            <input id="ConfpasswordUser" name="ConffpasswordUser" type="password" placeholder="Password" class="form-control input-large" required="" ng-model="user.confirmPassword">
            
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="saveUser"></label>
          <div class="controls">
            <button id="saveUser" name="saveUser" class="btn btn-success" ng-click="authorizeUser(user)">Save</button>
            <button id="cancelUser" name="cancelUser" class="btn btn-danger" ng-click="cancelOperation()">Cancel</button>
          </div>
        </div>

      </fieldset>
    </form>
  </div>
</div>

<!-- style="height: 500px; overflow-y: auto; margin-top: 50px" -->
<div class="row">
  <div id="searchResults" class="row">

      <table class="table table-bordered">
        <thead>
          <tr>
            <th style="width: 100px;"></th>
            <th>Username</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th style="width: 75px;"></th>
          </tr>
        </thead>
        <tbody >
          <tr ng-repeat="user in users | filter:searchUser">
            <td>
              <div class="col-md-3 col-lg-3 " align="center">
                <span gravatar name="{{ user.name }}" email-hash="{{ user.emailHash }}" width="100" height="100"></span>
              </div>
            </td>
            <td>{{ user.username }}</td>
            <td>{{ user.firstName }}</td>
            <td>{{ user.lastName }}</td>
            <td>
              <div class="control-groups">
                <button data-dz-remove class="btn btn-success delete btn-sm bot5" ng-click="promote2Admin(user)"
                        ng-show="user.roles.indexOf('admin') === -1">
                  <i class="glyphicon glyphicon-stair"></i>
                  <span>Promote</span>
                </button>
                <button data-dz-remove class="btn btn-danger delete btn-sm bot5" ng-click="cancelUser(user)">
                  <i class="glyphicon glyphicon-ban-trash"></i>
                  <span>Dismiss</span>
                </button>  
                <button data-dz-remove class="btn btn-primary delete btn-sm" ng-click="degrade2licensed(user)"
                        ng-show="user.roles.indexOf('admin') !== -1">
                  <i class="glyphicon glyphicon-ban-circle"></i>
                  <span>Degrade</span>
                </button>    
              </div>      
            </td>
          </tr>
        </tbody>
      </table>

  </div>
</div>

</div>